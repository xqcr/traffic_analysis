### Шаги по работе с проектом

Для начала откройте Docker Desktop

Далее вам нужно установить и запустить Redis:

```commandline
docker run -d --name redis-stack -p 6379:6379 -p 8001:8001 redis/redis-stack:latest
```

Теперь вы можете запустить обработку и парсинг данных в редис используя:

```commandline
python r.py
```

Запуск FastAPI сервер с автоматической перезагрузкой при изменениях:

```commandline
uvicorn api:app --reload 
```

Фронтенд:

```commandline
npm run dev --prefix ./simple_dashboard
```
Вы великолепны, а теперь вы можете перейти по адресу ниже и наслаждатсья жизнью!

http://localhost:5173/


------------------------------------------------------------------------------------------------------
# Загрузка в редиску

Файл r.py - чтение и очистка данных, преобразование данных, запись данных в Redis.

```r.py``` поместить в одну директорию с датасетом. Пример:

* ./telecom10k/*
* ./telecom100k/*
* ./telecom1000k/*
* ./r.py

В конце файла можно прописать путь к интересуемому датасету:
```commandline
if __name__ == "__main__":
    file_pattern = 'telecom100k/*'
    process_files(file_pattern)
```

**ВАЖНО**

Для корректной работы программы из папки с датасетом необходимо удалить ВСЕ файлы, кроме тех, которые начинаются с psx_*

## Подключение к БД Redis

Установка и запуск Redis:

```commandline
docker run -d --name redis-stack -p 6379:6379 -p 8001:8001 redis/redis-stack:latest
```

В начале ```r.py``` есть строка для подключения к БД. При необходимости можно изменить параметры подключения (указаны по умолчанию)

```commandline
r = redis.Redis(host='localhost', port=6379, db=0)
```

В Redis помещаются витрины данных за каждый час для каждого из шести сетевых устройств. Их можно получить по ключу вида:

3 2024-01-01 00:00:00

Где:
3 - IdPSX
2024-01-01 00:00:00 - Дата и время начала часа, для которого подготовлены данные

Когда сделаете таблицу со взломанными пользователями, засуньте их в dataframe и прогоните через функцию load() 

## TODO: Графики

В витрине данных есть следующие поля:
* IdSubscriber - номер пользователя
* IdPSX - номер сетевого оборудования
* Start1hPeriod - начала интервала в 1. час (он же часть ключа в Redis) 
* Start10mPeriod - начала интервала в 10 минут, взят из названия файла с логами
* UpTx - трафик выгрузки в байтах
* DownTx - трафик скачивания в байтах

Графики (мои идеи) 
* Для каждого устройства (IdPSX) получить сумму трафика и нарисовать его во времени
* Для пользователей, которых взломали: трафик во времени
* Общий трафик во времени

При этом под трафиком может пониматься:

* UpTx
* DownTx
* UpTx + DownTx
* UpTx - DownTx